import{_ as s,o as a,c as n,Q as o}from"./chunks/framework.a4f2a176.js";const h=JSON.parse('{"title":"redis&codis","description":"redis&codis部署连接等","frontmatter":{"title":"redis&codis","date":"2021-09-02T00:00:00.000Z","description":"redis&codis部署连接等","disabled":false,"readMins":15,"tags":["Github"]},"headers":[],"relativePath":"blog/ tools/redis&codis.md","filePath":"blog/ tools/redis&codis.md"}'),l={name:"blog/ tools/redis&codis.md"},p=o(`<h1 id="codis集群部署教程" tabindex="-1">codis集群部署教程 <a class="header-anchor" href="#codis集群部署教程" aria-label="Permalink to &quot;codis集群部署教程&quot;">​</a></h1><h2 id="第一步-zk部署" tabindex="-1">第一步：zk部署 <a class="header-anchor" href="#第一步-zk部署" aria-label="Permalink to &quot;第一步：zk部署&quot;">​</a></h2><ul><li><a href="https://blog.csdn.net/A_Little_Fish_/article/details/117384614" target="_blank" rel="noreferrer">zk部署</a></li></ul><h2 id="第二步-安装go环境" tabindex="-1">第二步：安装go环境 <a class="header-anchor" href="#第二步-安装go环境" aria-label="Permalink to &quot;第二步：安装go环境&quot;">​</a></h2><ul><li><a href="https://www.cnblogs.com/yiyi20120822/p/11652612.html" target="_blank" rel="noreferrer">go环境安装</a></li></ul><h2 id="第三步-codis部署" tabindex="-1">第三步：codis部署 <a class="header-anchor" href="#第三步-codis部署" aria-label="Permalink to &quot;第三步：codis部署&quot;">​</a></h2><ul><li><a href="https://www.cnblogs.com/zhoujinyi/p/9249873.html" target="_blank" rel="noreferrer">codis部署教程</a></li></ul><h2 id="启动命令" tabindex="-1">启动命令 <a class="header-anchor" href="#启动命令" aria-label="Permalink to &quot;启动命令&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#### zk启动：</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/usr/local/zookeeper/bin</span></span>
<span class="line"><span style="color:#B392F0;">zkServer.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">//zk启动</span></span>
<span class="line"><span style="color:#B392F0;">zkServer.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">//zk状态查询</span></span>
<span class="line"><span style="color:#B392F0;">zkServer.sh</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">//zk停止</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">### codis-server启动</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/codis/codis-server</span></span>
<span class="line"><span style="color:#B392F0;">codis-server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/codis/codis-server/redis7021.conf</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">//启动7021端口的codis-server</span></span>
<span class="line"><span style="color:#B392F0;">codis-server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/codis/codis-server/redis7022.conf</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">//启动7022端口的codis-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">### codis-dashboard启动：</span></span>
<span class="line"><span style="color:#B392F0;">codis-dashboard</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--ncpu=1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config=/etc/codis/codis-dashboard/dashboard.toml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log=/usr/local/codis/logs/dashboard.log</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log-level=warn</span><span style="color:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="color:#B392F0;">//关闭codis-dashboard服务：</span></span>
<span class="line"><span style="color:#B392F0;">codis-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dashboard=192.168.10.25:18080</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">### codis-proxy启动：</span></span>
<span class="line"><span style="color:#B392F0;">codis-proxy</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--ncpu=1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--config=/etc/codis/codis-proxy/proxy.toml</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log=/usr/local/codis/logs/proxy.log</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log-level=warn</span><span style="color:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="color:#B392F0;">//停止codis-proxy服务：</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">codis-admin</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--proxy=192.168.10.25:11080</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">### codis-fe启动</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">codis-fe</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--ncpu=1</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--dashboard-list=/etc/codis/codis-fe/codis.json</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--listen=192.168.10.25:18090</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log=/usr/local/codis/logs/fe.log</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--log-level=warn</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--assets-dir=/usr/local/codis/bin/assets/</span><span style="color:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="color:#B392F0;">//关闭codis-fe：</span></span>
<span class="line"><span style="color:#B392F0;">ps</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-ef</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">codis-fe</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">grep</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">grep</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">awk</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;{print $2}&#39;</span><span style="color:#F97583;">|</span><span style="color:#B392F0;">xargs</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">kill</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#### zk启动：</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/usr/local/zookeeper/bin</span></span>
<span class="line"><span style="color:#6F42C1;">zkServer.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">//zk启动</span></span>
<span class="line"><span style="color:#6F42C1;">zkServer.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">//zk状态查询</span></span>
<span class="line"><span style="color:#6F42C1;">zkServer.sh</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;">  </span><span style="color:#032F62;">//zk停止</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">### codis-server启动</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/codis/codis-server</span></span>
<span class="line"><span style="color:#6F42C1;">codis-server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/codis/codis-server/redis7021.conf</span><span style="color:#24292E;">  </span><span style="color:#032F62;">//启动7021端口的codis-server</span></span>
<span class="line"><span style="color:#6F42C1;">codis-server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/codis/codis-server/redis7022.conf</span><span style="color:#24292E;">  </span><span style="color:#032F62;">//启动7022端口的codis-server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">### codis-dashboard启动：</span></span>
<span class="line"><span style="color:#6F42C1;">codis-dashboard</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--ncpu=1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config=/etc/codis/codis-dashboard/dashboard.toml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log=/usr/local/codis/logs/dashboard.log</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log-level=warn</span><span style="color:#24292E;"> &amp;</span></span>
<span class="line"><span style="color:#6F42C1;">//关闭codis-dashboard服务：</span></span>
<span class="line"><span style="color:#6F42C1;">codis-admin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dashboard=192.168.10.25:18080</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">### codis-proxy启动：</span></span>
<span class="line"><span style="color:#6F42C1;">codis-proxy</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--ncpu=1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--config=/etc/codis/codis-proxy/proxy.toml</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log=/usr/local/codis/logs/proxy.log</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log-level=warn</span><span style="color:#24292E;"> &amp;</span></span>
<span class="line"><span style="color:#6F42C1;">//停止codis-proxy服务：</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">codis-admin</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--proxy=192.168.10.25:11080</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6A737D;">### codis-fe启动</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#6F42C1;">codis-fe</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--ncpu=1</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--dashboard-list=/etc/codis/codis-fe/codis.json</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--listen=192.168.10.25:18090</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log=/usr/local/codis/logs/fe.log</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--log-level=warn</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--assets-dir=/usr/local/codis/bin/assets/</span><span style="color:#24292E;"> &amp;</span></span>
<span class="line"><span style="color:#6F42C1;">//关闭codis-fe：</span></span>
<span class="line"><span style="color:#6F42C1;">ps</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-ef</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#032F62;">codis-fe</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">grep</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> </span><span style="color:#032F62;">grep</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">awk</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;{print $2}&#39;</span><span style="color:#D73A49;">|</span><span style="color:#6F42C1;">xargs</span><span style="color:#24292E;"> </span><span style="color:#032F62;">kill</span></span></code></pre></div><h2 id="codis集群部署遇到的一些问题" tabindex="-1">codis集群部署遇到的一些问题 <a class="header-anchor" href="#codis集群部署遇到的一些问题" aria-label="Permalink to &quot;codis集群部署遇到的一些问题&quot;">​</a></h2><ul><li><a href="https://note.youdao.com/s/CB2d2pIR" target="_blank" rel="noreferrer">codis部署问题总结</a></li></ul>`,11),e=[p];function c(r,t,i,y,d,E){return a(),n("div",null,e)}const C=s(l,[["render",c]]);export{h as __pageData,C as default};
