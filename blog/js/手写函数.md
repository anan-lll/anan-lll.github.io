---
title: 手写函数
date: 2022-02-09
description: 手写常用函数的功能
readMins: 8
tags:
  - JavaScript
---

## 继承

```js
function Animal(name) {
  this.name = name;
}

Animal.prototype.getName = function () {
  return this.name;
};

Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.constructor = Dog;

function Dog(age, ...args) {
  Animal.call(this, ...args);
  this.age = age;

  this.getAge = function () {
    return this.age;
  };
}

console.log(new Dog(10, 'Tom').getName());
```

## 数组扁平

```js
function flat(arr) {
  let result = [];
  arr.forEach(item => {
    if (Array.isArray(item)) {
      result = result.concat(flat(item));
    } else {
      result.push(item);
    }
  });

  return result;
}
```

## 判断实际类型

```js
function typeOf(input) {
  return Object.prototype.toString.call(input).slice(8, -1);
}
```

## 深拷贝

```js
function typeOf(input) {
  return Object.prototype.toString.call(input).slice(8, -1);
}

function cloneDeep(obj) {
  if (obj === null || typeof obj !== 'object') return;
  const type = typeOf(obj);

  const strategy = {
    Date() {},
    RegExp() {},
    Array() {},
    Object() {},
  };
  const result = strategy[type] || strategy.Object;
}
```
